---

  - name: Palo Alto Playbook
    hosts: paloalto
    gather_facts: false

    connection: local

    collections:
      - paloaltonetworks.panos

    vars_files:
      - inventario/group_vars/vars.yml

    tasks:
      - name: show system info
        panos_op:
          provider: '{{ palo_provider }}'
          cmd: 'show system info'
        register: system_info
      - debug: var=system_info.stdout
        
      - name: show chassis-ready
        panos_op:
          provider: '{{ palo_provider }}'
          cmd: 'show chassis-ready'
        register: chassis_ready
      - debug: var=chassis_ready.stdout

      - name: check if ready
        panos_check:
          provider: '{{ palo_provider }}'
        retries: 3
        delay: 5
